<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <base href="https://zonestar3d.github.io/EggAPK/">    
    <title>eEGG资源中心</title>
    <script src="./qrcode.min.js"></script>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        header {
            background: #2575fc;
            color: white;
            padding: 40px 20px;
            text-align: center;
            position: relative;
        }
        
        .logo{
          position: absolute;
          top: 20px;
          left: 20px;
          width: 100px;
          height: auto;
          filter: drop-shadow(0 2px 3px rgba(0,0,0,.25));
        }
        
        .language-switcher {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }
        
        .lang-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 15px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .lang-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .lang-btn.active {
            background: rgba(255, 255, 255, 0.4);
            font-weight: bold;
        }
        
        header h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            font-weight: 700;
        }
        
        header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }
        
        .nav-tabs {
            display: flex;
            background: #f0f4f8;
            border-bottom: 2px solid #e0e0e0;
            overflow-x: auto;
            white-space: nowrap;
        }
        
        .tab-btn {
            flex: 1;
            min-width: 180px;
            padding: 18px 20px;
            background: none;
            border: none;
            border-right: 1px solid #e0e0e0;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: #555;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .tab-btn:last-child {
            border-right: none;
        }
        
        .tab-btn:hover {
            background: #e3f2fd;
            color: #2575fc;
        }
        
        .tab-btn.active {
            background: white;
            color: #2575fc;
            border-bottom: 3px solid #2575fc;
            position: relative;
            top: 1px;
        }
        
        .tab-btn i {
            font-size: 1.2rem;
        }
        
        .tab-content {
            padding: 40px;
            display: none;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tab-content.active {
            display: block;
        }
        
        .tab-content h2 {
            color: #2575fc;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #e0e0e0;
            font-size: 1.8rem;
        }
        
        .tab-content h3 {
            color: #2c3e50;
            margin: 25px 0 15px;
            font-size: 1.4rem;
        }
        
        .tab-content h4 {
            color: #34495e;
            margin: 20px 0 10px;
            font-size: 1.2rem;
        }
        
        .tab-content p {
            margin-bottom: 15px;
            text-align: justify;
        }
        
        .tab-content ul, .tab-content ol {
            margin-bottom: 20px;
            padding-left: 25px;
        }
        
        .tab-content li {
            margin-bottom: 10px;
        }
        
        .tab-content table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .tab-content th {
            background: #2575fc;
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: 600;
        }
        
        .tab-content td {
            padding: 12px 15px;
            border: 1px solid #e0e0e0;
            text-align: center;
        }
        
        .tab-content tr:nth-child(even) {
            background: #f8f9fa;
        }
        
        .download-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
        }
        
        .download-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .download-card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        
        .download-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        .download-card h4 {
            color: #2575fc;
            margin-bottom: 15px;
            font-size: 1.3rem;
        }
        
        .download-card p {
            margin-bottom: 20px;
            color: #666;
            min-height: 60px;
        }
        
        .download-btn {
            display: inline-block;
            background: #2575fc;
            color: white;
            padding: 12px 25px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            text-align: center;
            width: 100%;
        }
        
        .download-btn:hover {
            background: #1c68e0;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(37, 117, 252, 0.3);
        }
        
        .qr-container {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        #qrcode {
            display: inline-block;
            margin: 20px 0;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .warning {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .warning strong {
            color: #856404;
        }
        
        .note {
            background: #d1ecf1;
            border-left: 4px solid #17a2b8;
            padding: 15px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .note strong {
            color: #0c5460;
        }
        
        .manual-section {
            margin-bottom: 40px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }
        
        .feature-table {
            overflow-x: auto;
            margin: 20px 0;
        }
        
        .back-to-top {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #2575fc;
            color: white;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            box-shadow: 0 4px 12px rgba(37, 117, 252, 0.3);
            transition: all 0.3s ease;
            z-index: 1000;
            display: none;
        }
        
        .back-to-top:hover {
            background: #1c68e0;
            transform: translateY(-3px);
        }
        
        footer {
            text-align: center;
            padding: 25px;
            background: #f8f9fa;
            color: #666;
            font-size: 0.95rem;
            border-top: 1px solid #e0e0e0;
        }
        
        .manual-link {
            display: inline-block;
            margin: 10px 5px;
            padding: 8px 16px;
            background: #e3f2fd;
            color: #2575fc;
            text-decoration: none;
            border-radius: 20px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }
        
        .manual-link:hover {
            background: #2575fc;
            color: white;
        }
        
        @media (max-width: 768px) {
            .logo {
                width: 60px;
                top: 15px;
                left: 15px;
            }
            
            header {
                padding: 30px 15px;
            }
            
            header h1 {
                font-size: 1.8rem;
            }
            
            header p {
                font-size: 1rem;
            }
            
            .nav-tabs {
                flex-direction: column;
            }
            
            .tab-btn {
                min-width: 100%;
                border-right: none;
                border-bottom: 1px solid #e0e0e0;
                justify-content: flex-start;
                padding: 15px;
            }
            
            .tab-btn.active {
                border-bottom: 3px solid #2575fc;
            }
            
            .tab-content {
                padding: 25px 15px;
            }
            
            .tab-content h2 {
                font-size: 1.5rem;
            }
            
            .download-grid {
                grid-template-columns: 1fr;
            }
            
            .language-switcher {
                position: static;
                justify-content: center;
                margin-top: 15px;
            }
            
            .feature-table table {
                font-size: 0.9rem;
            }
            
            .feature-table th, 
            .feature-table td {
                padding: 8px;
            }
        }
        
        @media (max-width: 480px) {
            .container {
                border-radius: 15px;
            }
            
            .tab-content h2 {
                font-size: 1.3rem;
            }
            
            .tab-content h3 {
                font-size: 1.2rem;
            }
            
            .download-card {
                padding: 15px;
            }
        }
        
        .icon {
            display: inline-block;
            width: 24px;
            height: 24px;
            margin-right: 8px;
            vertical-align: middle;
        }
        
        .content-wrapper {
            max-height: 600px;
            overflow-y: auto;
            padding-right: 10px;
        }
        
        .content-wrapper::-webkit-scrollbar {
            width: 8px;
        }
        
        .content-wrapper::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        .content-wrapper::-webkit-scrollbar-thumb {
            background: #2575fc;
            border-radius: 4px;
        }
        
        .content-wrapper::-webkit-scrollbar-thumb:hover {
            background: #1c68e0;
        }
    </style>
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">    
</head>
<body>
    <div class="container">
        <header>
            <img class="logo" src="eEGGlogo.svg" alt="eEGG Logo">
            <div class="language-switcher">
                <a href="index_en.html" class="lang-btn">
                    <i class="fas fa-circle-flag-gb"></i>
                     English
                </a>
                <a href="index_zh.html" class="lang-btn active">
                    <i class="fas fa-circle-flag-cn"></i>
                     中文
                </a>
            </div>
            <h1>eEGG电子球资源中心</h1>
            <p>用户手册、应用下载、工具软件一站式获取</p>
        </header>
        
        <nav class="nav-tabs">
            <button class="tab-btn active" data-tab="manual">
                <i class="fas fa-book"></i>
                用户手册
            </button>
            <button class="tab-btn" data-tab="apk">
                <i class="fas fa-mobile-alt"></i>
                应用下载
            </button>
            <button class="tab-btn" data-tab="tools">
                <i class="fas fa-tools"></i>
                转换工具
            </button>
        </nav>
        
        <!-- User Manual Tab -->
        <div class="tab-content active" id="manual-tab">
            <h2>eEGG用户手册</h2>
            
            <div class="content-wrapper">
                <!-- Language switch links -->
                <div style="margin-bottom: 20px; text-align: center;">
                    <a href="./manual/usermanual-cn.html" class="manual-link" target="_blank">
                        <i class="fas fa-file-alt"></i> 查看完整中文手册
                    </a>
                    <a href="./manual/usermanual.html" class="manual-link" target="_blank">
                        <i class="fas fa-file-alt"></i> 查看完整英文手册
                    </a>
                </div>
                
                <!-- Product Features -->
                <div class="manual-section">
                    <h3>产品功能</h3>
                    <p>电子球的设备型号不同，它们的功能也有所区别，以下是各个型号设备支持的功能列表：</p>
                    
                    <div class="feature-table">
                        <table>
                            <thead>
                                <tr>
                                    <th>设备型号</th>
                                    <th>产品名称</th>
                                    <th>视频播放</th>
                                    <th>图片播放</th>
                                    <th>音乐播放</th>
                                    <th>网络电台</th>
                                    <th>小游戏</th>
                                    <th>语音控制</th>
                                    <th>AI对话</th>
                                    <th>手机文件传输</th>
                                </tr>
                            </thead>
                            <tbody id="featuresTableBody">
                                <!-- Table content will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                    <p class="note"><strong>注：</strong> 下文中将直接使用产品型号作为不同产品的代称。</p>
                </div>
                
                <!-- Device Operation -->
                <div class="manual-section">
                    <h3>设备操作</h3>
                    
                    <h4>开机</h4>
                    <p>电子球上部有1个硅胶电源按钮，用力按一下这个按钮，设备即可开机。</p>
                    <div class="warning">
                        <strong>⚠️注意：</strong> 收到电子球后，请先给设备充满电后再使用。
                    </div>
                    
                    <h4>操作</h4>
                    <p>电子球内置加速度传感器, 可使用<strong>甩一甩</strong>来实现不同的功能。具体方法为：手握电子球连续轻轻甩动几次，然后停止等待约1秒钟，设备会识别甩动的次数并执行相应的功能：</p>
                    
                    <div class="feature-table">
                        <table id="shakeTable">
                            <thead>
                                <tr>
                                    <th>操作</th>
                                    <th>功能</th>
                                    <th>说明</th>
                                </tr>
                            </thead>
                            <tbody id="shakeTableBody">
                                <!-- Table content will be loaded dynamically -->
                            </tbody>
                        </table>
                    </div>
                </div>
                
                <!-- Charging -->
                <div class="manual-section">
                    <h3>给设备充电</h3>
                    <ol id="chargingList">
                        <!-- Charging list will be loaded dynamically -->
                    </ol>
                </div>
                
                <!-- File Transfer Methods -->
                <div class="manual-section">
                    <h3>文件传输方法</h3>
                    
                    <h4>通过浏览器传输文件到设备</h4>
                    <p>操作设备菜单进入浏览器文件传输模式，打开电脑浏览器并输入设备的IP地址(通常是192.168.x.x)，根据提示管理设备上的文件(上传文件到设备或者从设备上删除文件)。</p>
                    <div class="note">
                        <strong>⚠️注1：</strong> 上传文件到设备前，您需要通过文件转换工具将视频/图片文件转换为设备可识别的格式。
                    </div>
                    
                    <h4>通过手机传输文件到设备(对eEGG6、eEGG7和eEGG7-AI)</h4>
                    <p>下载并安装"eEGG文件转换与传输助手"APP到您的手机，操作设备进入手机文件传输模式，连接同一WiFi网络，扫描二维码连接设备，即可传输文件。</p>
                    <div class="note">
                        <strong>⚠️注：</strong> eEGG文件转换与传输助手会在传输文件前自动转换图片和视频格式。
                    </div>
                    
                    <h4>连接USB传输文件</h4>
                    <p>将设备通过USB直接连接到电脑，可以非常方便地将要播放的媒体文件直接复制到设备的内存。</p>
                    <div class="warning">
                        <strong>⚠️注意：</strong> 视频和图片文件复制前，需要使用视频和图片转换工具软件转换为设备可用的格式。不要删除设备上的目录,否则可能导致设备的某些功能无法正常工作。
                    </div>
                </div>
                
                <!-- Quick Links -->
                <div class="manual-section">
                    <h3>快速链接</h3>
                    <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                        <a href="#apk-tab" class="manual-link tab-link" data-tab="apk">
                            <i class="fas fa-download"></i> 下载手机应用
                        </a>
                        <a href="#tools-tab" class="manual-link tab-link" data-tab="tools">
                            <i class="fas fa-tools"></i> 下载转换工具
                        </a>
                        <a href="readme_tools.html" class="manual-link" target="_blank">
                            <i class="fas fa-file-pdf"></i> 转换工具详细教程
                        </a>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- APK Download Tab -->
        <div class="tab-content" id="apk-tab">
            <h2>下载应用</h2>
            
            <div class="content-wrapper">
                <p>扫描下方二维码，立即安装eEGG文件转换与传送助手应用</p>
                
                <div class="qr-container">
                    <p>使用手机扫描二维码下载应用</p>
                    <div id="qrcode"></div>
                    
                    <div class="version-selector" style="margin: 20px 0;">
                        <label for="versionSelect">选择版本:</label>
                        <select id="versionSelect" style="width: 100%; padding: 10px; margin-top: 10px; border-radius: 5px; border: 1px solid #ddd;">
                            <option value="">加载版本中...</option>
                        </select>
                    </div>
                    
                    <a href="#" class="download-btn" id="directDownload" style="display: inline-block; width: auto; min-width: 200px;">
                        <i class="fas fa-download"></i> 直接下载APK
                    </a>
                </div>
                
                <div class="manual-section">
                    <h3>安装说明</h3>
                    <ol id="instructionsList">
                        <!-- Instructions will be loaded dynamically -->
                    </ol>
                </div>
                
                <div class="manual-section">
                    <h3>应用信息</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-top: 15px;">
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <strong>应用名称:</strong><br>
                            eEGG文件转换与传送助手
                        </div>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <strong>版本:</strong><br>
                            <span id="appVersion">0.1.0</span>
                        </div>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <strong>文件大小:</strong><br>
                            <span id="appSize">约 135 MB</span>
                        </div>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px;">
                            <strong>系统要求:</strong><br>
                            Android 5.0+
                        </div>
                    </div>
                </div>
                
                <div id="releaseInfo" style="margin-top: 25px;">
                    <!-- Release info will be loaded dynamically -->
                </div>
                
                <div class="manual-section">
                    <h3>注意事项</h3>
                    <ul id="notesList">
                        <!-- Notes will be loaded dynamically -->
                    </ul>
                </div>
            </div>
        </div>
        
        <!-- Conversion Tools Tab -->
        <div class="tab-content" id="tools-tab">
            <h2>转换工具下载</h2>
            
            <div class="content-wrapper">
                <p>下载视频和图片转换工具，将您的媒体文件转换为eEGG设备可识别的格式</p>
                
                <div class="download-grid">
                    <!-- Video Converter -->
                    <div class="download-card">
                        <h4><i class="fas fa-video icon"></i> 视频转换工具</h4>
                        <p>将您的视频文件转换为eEGG设备可播放的格式。支持多种视频格式转换，可调整分辨率和帧率以适应不同型号设备。</p>
                        <div style="margin: 15px 0;">
                            <strong>支持格式:</strong>
                            <ul id="videoFormatsList" style="margin-top: 5px; font-size: 0.9rem;">
                                <!-- Video formats will be loaded dynamically -->
                            </ul>
                        </div>
                        <a href="https://github.com/ZONESTAR3D/eEGG-Tools/archive/refs/tags/VideoConverter-V0.7.zip" class="download-btn">
                            <i class="fas fa-download"></i> 下载视频转换工具
                        </a>
                    </div>
                    
                    <!-- Image Converter -->
                    <div class="download-card">
                        <h4><i class="fas fa-image icon"></i> 图片转换工具</h4>
                        <p>将您的图片文件转换为eEGG设备可显示的格式。支持批量转换，可调整尺寸和裁剪为圆形以适应设备屏幕。</p>
                        <div style="margin: 15px 0;">
                            <strong>功能特点:</strong>
                            <ul id="imageFeaturesList" style="margin-top: 5px; font-size: 0.9rem;">
                                <!-- Image features will be loaded dynamically -->
                            </ul>
                        </div>
                        <a href="https://github.com/ZONESTAR3D/eEGG-Tools/archive/refs/tags/ImageConverter-V0.3.zip" class="download-btn">
                            <i class="fas fa-download"></i> 下载图片转换工具
                        </a>
                    </div>
                </div>
                
                <div class="manual-section">
                    <h3>使用指南</h3>
                    
                    <h4>视频转换步骤</h4>
                    <ol id="videoConversionSteps">
                        <!-- Video steps will be loaded dynamically -->
                    </ol>
                    
                    <h4>图片转换步骤</h4>
                    <ol id="imageConversionSteps">
                        <!-- Image steps will be loaded dynamically -->
                    </ol>
                </div>
                
                <div class="manual-section">
                    <h3>重要提示</h3>
                    <div class="warning">
                        <strong>⚠️注意：</strong>
                        <ul id="toolNotesList" style="margin-top: 10px;">
                            <!-- Tool notes will be loaded dynamically -->
                        </ul>
                    </div>
                    
                    <div class="note" style="margin-top: 20px;">
                        <strong> 提示：</strong>
                        <p>有关转换工具的详细使用方法和参数设置，请参考<a href="readme_tools.html" style="color: #17a2b8; font-weight: bold;">转换工具详细教程</a>。</p>
                    </div>
                </div>
            </div>
        </div>
        
        <footer>
            <p>&copy; 2023 深圳市众视达创新科技有限公司. 保留所有权利.</p>
            <p style="margin-top: 10px; font-size: 0.85rem; color: #888;">
                如有问题请联系技术支持: support@zone-star.com
            </p>
        </footer>
    </div>
    
    <a href="#" class="back-to-top" id="backToTop">
        <i class="fas fa-arrow-up"></i>
    </a>

    <script>
        // Product features table data
        const featuresTableData = [
            ["eEGG5", "5厘米电子球", "✔️", "✔️", "❌", "❌", "✔️", "❌", "❌", "❌"],
            ["eEGG6", "6厘米电子球", "✔️", "✔️", "✔️", "✔️", "✔️", "❌", "✔️", "✔️"],
            ["eEGG7", "7厘米电子球", "✔️", "✔️", "✔️", "✔️", "✔️", "❌", "✔️", "✔️"],
            ["eEGG7-AI", "7厘米AI电子球", "✔️", "✔️", "✔️", "✔️", "❌", "✔️", "✔️", "✔️"]
        ];

        // Shake operation table data
        const shakeTableData = [
            ["甩1次", "下一个/增加", "在菜单界面，切换下一个项目；在媒体播放时，播放下一个文件；调整音量时，音量增加"],
            ["甩2次", "执行/上一个/减小", "在菜单界面，执行当前选择的菜单或功能；在媒体播放时，播放上一个文件；调整音量时，音量减少"],
            ["甩3次", "打开菜单", "显示菜单界面"],
            ["甩4次", "播放模式/音量调节", "在媒体播放时，甩4次可打开调整音量/播放模式的弹出式菜单；然后接着甩动可调整音量或播放模式"],
            ["甩5次", "关机", "关机后按电子球上的按钮开机"]
        ];

        // Charging steps
        const chargingSteps = [
            "本设备可使用各类带Type-C接口充电器充电，通常情况下90分钟之内可充满内部电池。",
            "如果设备长时间放置导致内部电池过放电，请先插上充电器10分钟之后，在试着打开设备的电源。",
            "如果设备长时间不使用，建议至少每2个月给设备充满电一次。"
        ];

        // Installation instructions
        const instructions = [
            "使用手机摄像头或扫码工具扫描上方二维码",
            "点击下载链接，等待应用下载完成",
            "打开下载的APK文件进行安装",
            "如有安全提示，请选择\"继续安装\"或\"允许安装\"",
            "安装完成后即可打开应用"
        ];

        // Important notes
        const notes = [
            "请确保手机有足够的存储空间",
            "建议在Wi-Fi环境下下载以节省流量",
            "安装前请确保已开启\"允许安装来自未知来源的应用\"",
            "如有问题，请联系我们的技术支持"
        ];

        // Video formats
        const videoFormats = [
            "MP4, AVI, MOV, MKV",
            "转换为MJPEG格式",
            "最大分辨率: 1920x1080",
            "最大时长: 60秒"
        ];

        // Image features
        const imageFeaturesList = [
            "支持JPG, PNG, BMP格式",
            "批量转换功能",
            "圆形裁剪选项",
            "尺寸调整: 240x240 或 360x360"
        ];

        // Video conversion steps
        const videoConversionSteps = [
            "下载并解压视频转换工具",
            "运行视频转换工具应用软件",
            "根据设备型号选择预设配置(eEGG5/eEGG6/eEGG7)",
            "添加需要转换的视频文件",
            "点击\"转换\"按钮，等待转换完成",
            "转换后的文件保存在源文件目录下的output文件夹中"
        ];

        // Image conversion steps
        const imageConversionSteps = [
            "下载并解压图片转换工具",
            "运行图片转换工具应用软件",
            "根据设备型号选择输出尺寸(240×240或360×360)",
            "点击\"导入\"按钮选择源图片文件",
            "如需圆形裁剪，勾选相应选项",
            "点击\"导出\"按钮并输入文件名保存"
        ];

        // Tool notes
        const toolNotes = [
            "转换工具仅支持Windows系统",
            "解压路径中不要使用中文目录",
            "视频文件长度不应超过60秒",
            "建议视频分辨率为1920x1080，帧率30fps",
            "转换前请备份原始文件"
        ];

        // GitHub configuration
        const githubConfig = {
            username: 'ZONESTAR3D',
            repository: 'EggAPK'
        };

        // Load static content
        function loadStaticContent() {
            // Load product features table
            const featuresTableBody = document.getElementById('featuresTableBody');
            featuresTableData.forEach(row => {
                const tr = document.createElement('tr');
                row.forEach(cell => {
                    const td = document.createElement('td');
                    td.innerHTML = cell;
                    tr.appendChild(td);
                });
                featuresTableBody.appendChild(tr);
            });

            // Load shake operation table
            const shakeTableBody = document.getElementById('shakeTableBody');
            shakeTableData.forEach(row => {
                const tr = document.createElement('tr');
                row.forEach(cell => {
                    const td = document.createElement('td');
                    td.innerHTML = cell;
                    tr.appendChild(td);
                });
                shakeTableBody.appendChild(tr);
            });

            // Load charging list
            const chargingList = document.getElementById('chargingList');
            chargingSteps.forEach(step => {
                const li = document.createElement('li');
                li.textContent = step;
                chargingList.appendChild(li);
            });

            // Load installation instructions
            const instructionsList = document.getElementById('instructionsList');
            instructions.forEach(instruction => {
                const li = document.createElement('li');
                li.textContent = instruction;
                instructionsList.appendChild(li);
            });

            // Load important notes
            const notesList = document.getElementById('notesList');
            notes.forEach(note => {
                const li = document.createElement('li');
                li.textContent = note;
                notesList.appendChild(li);
            });

            // Load video formats list
            const videoFormatsList = document.getElementById('videoFormatsList');
            videoFormats.forEach(format => {
                const li = document.createElement('li');
                li.textContent = format;
                videoFormatsList.appendChild(li);
            });

            // Load image features list
            const imageFeaturesListElement = document.getElementById('imageFeaturesList');
            imageFeaturesList.forEach(feature => {
                const li = document.createElement('li');
                li.textContent = feature;
                imageFeaturesListElement.appendChild(li);
            });

            // Load video conversion steps
            const videoConversionStepsElement = document.getElementById('videoConversionSteps');
            videoConversionSteps.forEach(step => {
                const li = document.createElement('li');
                li.textContent = step;
                videoConversionStepsElement.appendChild(li);
            });

            // Load image conversion steps
            const imageConversionStepsElement = document.getElementById('imageConversionSteps');
            imageConversionSteps.forEach(step => {
                const li = document.createElement('li');
                li.textContent = step;
                imageConversionStepsElement.appendChild(li);
            });

            // Load tool notes
            const toolNotesList = document.getElementById('toolNotesList');
            toolNotes.forEach(note => {
                const li = document.createElement('li');
                li.textContent = note;
                toolNotesList.appendChild(li);
            });
        }

        // Fetch GitHub Releases
        async function fetchReleases() {
            try {
                console.log('正在获取版本信息...');
                const apiUrl = `https://api.github.com/repos/${githubConfig.username}/${githubConfig.repository}/releases`;
                
                const response = await fetch(apiUrl);
                if (!response.ok) throw new Error(`HTTP错误! 状态码: ${response.status}`);
                
                const releases = await response.json();
                console.log('版本信息获取成功:', releases);
                return releases;
            } catch (error) {
                console.error('获取版本信息失败:', error);
                return [];
            }
        }

        // Find APK asset from release
        function findApkAsset(release) {
            if (!release.assets || release.assets.length === 0) return null;
            return release.assets.find(asset => asset.name.toLowerCase().endsWith('.apk'));
        }

        // Generate QR code
        function generateQRCode(url, container) {
            container.innerHTML = ''; // 清空容器
            
            try {
                // Create canvas element
                const canvas = document.createElement('canvas');
                container.appendChild(canvas);
                
                // Generate QR code using QRCode library
                QRCode.toCanvas(canvas, url, {
                    width: 200,
                    height: 200,
                    margin: 1,
                    color: {
                        dark: '#000000',
                        light: '#FFFFFF'
                    }
                }, function(error) {
                    if (error) {
                        console.error('生成二维码失败:', error);
                        // Show fallback link
                        container.innerHTML = `
                            <div style="text-align: center; padding: 20px;">
                                <p>二维码生成失败</p>
                                <p><a href="${url}" target="_blank" style="color: #2575fc; font-weight: bold;">
                                    点击直接下载
                                </a></p>
                            </div>
                        `;
                    } else {
                        console.log('二维码生成成功');
                    }
                });
            } catch (error) {
                console.error('生成二维码异常:', error);
                // Show fallback link
                container.innerHTML = `
                    <div style="text-align: center; padding: 20px;">
                        <p>二维码生成异常</p>
                        <p><a href="${url}" target="_blank" style="color: #2575fc; font-weight: bold;">
                            点击直接下载
                        </a></p>
                    </div>
                `;
            }
        }

        // Update version selector
        function updateVersionSelector(releases) {
            const select = document.getElementById('versionSelect');
            
            if (releases.length === 0) {
                select.innerHTML = `<option value="">暂无可用版本</option>`;
                return;
            }
            
            // Clear options
            select.innerHTML = '';
            
            // Add version options
            releases.forEach((release, index) => {
                const apkAsset = findApkAsset(release);
                if (apkAsset) {
                    const option = document.createElement('option');
                    option.value = index;
                    option.textContent = `${release.tag_name} - ${apkAsset.name}`;
                    option.dataset.downloadUrl = apkAsset.browser_download_url;
                    option.dataset.releaseData = JSON.stringify({
                        tag_name: release.tag_name,
                        name: release.name,
                        body: release.body,
                        download_count: apkAsset.download_count,
                        size: apkAsset.size,
                        created_at: release.created_at
                    });
                    select.appendChild(option);
                }
            });
            
            // Select first version by default
            if (select.options.length > 0) {
                select.selectedIndex = 0;
                updateReleaseInfo(0, releases);
            }
        }

        // Update release information display
        function updateReleaseInfo(selectedIndex, releases) {
            const releaseInfo = document.getElementById('releaseInfo');
            const select = document.getElementById('versionSelect');
            const selectedOption = select.options[selectedIndex];
            
            if (!selectedOption || !selectedOption.dataset.releaseData) {
                releaseInfo.innerHTML = '';
                return;
            }
            
            const releaseData = JSON.parse(selectedOption.dataset.releaseData);
            const fileSize = (releaseData.size / (1024 * 1024)).toFixed(1);
            
            releaseInfo.innerHTML = `
                <div class="manual-section">
                    <h3>版本说明</h3>
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-top: 10px;">
                        <p><strong>${releaseData.name || releaseData.tag_name}</strong></p>
                        <p>${releaseData.body || '暂无版本说明。'}</p>
                        <div style="margin-top: 15px; display: flex; flex-wrap: wrap; gap: 15px;">
                            <div><strong>下载次数:</strong> ${releaseData.download_count}</div>
                            <div><strong>文件大小:</strong> ${fileSize} MB</div>
                            <div><strong>发布时间:</strong> ${new Date(releaseData.created_at).toLocaleDateString('zh-CN')}</div>
                        </div>
                    </div>
                </div>
            `;
            
            // Update download links and QR code
            const downloadUrl = selectedOption.dataset.downloadUrl;
            updateDownloadLinks(downloadUrl, releaseData);
        }

        // Update download links and QR code
        function updateDownloadLinks(downloadUrl, releaseData) {
            const downloadBtn = document.getElementById('directDownload');
            downloadBtn.href = downloadUrl;
            
            // Update QR code
            const qrcodeContainer = document.getElementById('qrcode');
            generateQRCode(downloadUrl, qrcodeContainer);
            
            // Update app information
            if (releaseData) {
                document.getElementById('appVersion').textContent = releaseData.tag_name.replace('V', '');
                document.getElementById('appSize').textContent = `约 ${(releaseData.size / (1024 * 1024)).toFixed(1)} MB`;
            }
        }

        // Load releases
        async function loadReleases() {
            try {
                const releases = await fetchReleases();
                updateVersionSelector(releases);
                
                // Set version change event
                const versionSelect = document.getElementById('versionSelect');
                if (versionSelect) {
                    versionSelect.addEventListener('change', function() {
                        updateReleaseInfo(this.selectedIndex, releases);
                    });
                }
            } catch (error) {
                console.error('加载版本信息失败:', error);
                const releaseInfo = document.getElementById('releaseInfo');
                if (releaseInfo) {
                    releaseInfo.innerHTML = 
                        '<div style="color: red; padding: 10px;">加载版本信息失败，请刷新页面重试。</div>';
                }
            }
        }

        // DOM Content Loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Load static content
            loadStaticContent();
            
            // Load releases
            loadReleases();
            
            // Tab switching functionality
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    
                    // Remove all active classes
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Add active class to current tab
                    this.classList.add('active');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                    
                    // Scroll to top
                    document.querySelector('.tab-content.active').scrollTop = 0;
                    
                    // Update back to top button
                    updateBackToTopButton();
                });
            });
            
            // Quick link navigation
            document.querySelectorAll('.tab-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const tabId = this.dataset.tab;
                    
                    // Switch to corresponding tab
                    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    const targetTab = document.querySelector(`.tab-btn[data-tab="${tabId}"]`);
                    if (targetTab) {
                        targetTab.classList.add('active');
                        document.getElementById(`${tabId}-tab`).classList.add('active');
                    }
                });
            });
            
            // Back to top button
            const backToTopBtn = document.getElementById('backToTop');
            
            window.addEventListener('scroll', function() {
                updateBackToTopButton();
            });
            
            if (backToTopBtn) {
                backToTopBtn.addEventListener('click', function(e) {
                    e.preventDefault();
                    window.scrollTo({
                        top: 0,
                        behavior: 'smooth'
                    });
                });
            }
            
            function updateBackToTopButton() {
                if (backToTopBtn) {
                    if (window.scrollY > 300) {
                        backToTopBtn.style.display = 'flex';
                    } else {
                        backToTopBtn.style.display = 'none';
                    }
                }
            }
            
            // Initialize back to top button
            updateBackToTopButton();
        });
    </script>
</body>
</html>